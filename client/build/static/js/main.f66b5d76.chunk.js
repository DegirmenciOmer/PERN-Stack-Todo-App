(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{26:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),o=n(13),a=n.n(o),s=(n(26),n(39)),i=n(35),d=n(41),u=n(9),l=n.n(u),j=n(12),b=n(10);var p=n(3),h=r.a.createContext(),O="https://boiling-sands-97823.herokuapp.com/todos";function x(){return Object(c.useContext)(h)}function f(e){var t=e.children,n=function(e,t){var n="pern-todo-"+e,r=Object(c.useState)((function(){var e=localStorage.getItem(n);return null!=e?JSON.parse(e):"function"===typeof t?t():t})),o=Object(b.a)(r,2),a=o[0],s=o[1];return Object(c.useEffect)((function(){localStorage.setItem(n,JSON.stringify(a))}),[n,a]),[a,s]}("todolist",[]),r=Object(b.a)(n,2),o=r[0],a=r[1],s=Object(c.useState)(""),i=Object(b.a)(s,2),d=i[0],u=i[1],x=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,n={description:d},!(d.length<3)){e.next=7;break}alert("You must type at least 3 characters"),e.next=10;break;case 7:return e.next=9,fetch(O,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 9:u("");case 10:window.location="/",e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(h.Provider,{value:{todoList:o,setTodoList:a,onSubmitTodo:x,description:d,setDescription:u},children:t})}var v=function(){var e=x(),t=e.description,n=e.setDescription,c=e.onSubmitTodo;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{className:"text-center mt-5",children:"Pern Todo App"}),Object(p.jsx)("div",{children:Object(p.jsx)(s.a,{onSubmit:c,className:"d-flex mt-5",children:Object(p.jsxs)(i.a,{children:[Object(p.jsx)(s.a.Control,{value:t,type:"text",placeholder:"Enter a new todo",onChange:function(e){return n(e.target.value)}}),Object(p.jsx)(d.a,{variant:"success",type:"submit",children:"Add"})]})})})]})},m=n(37),y=n(40),g=n(36),w=n(38),T=function(e){var t=e.activeTodo,n=e.setOpenModal,c=e.openModal,r=x(),o=r.todoList,a=r.setTodoList,s=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/").concat(t),{method:"DELETE"});case 3:a(o.filter((function(e){return e.todo_id!==t}))),n(!1),console.log("".concat(O,"/").concat(t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(w.a,{show:c,onHide:function(){return n(!1)},children:[Object(p.jsx)(w.a.Header,{children:Object(p.jsx)(w.a.Title,{children:"Delete Todo"})}),Object(p.jsxs)(w.a.Body,{children:['Do you want to delete "',t.description,'" ?']}),Object(p.jsxs)(w.a.Footer,{children:[Object(p.jsx)(d.a,{variant:"danger",onClick:function(){return s(t.todo_id)},children:"Delete"}),Object(p.jsx)(d.a,{variant:"secondary",onClick:function(){return n(!1)},children:"Cancel"})]})]})},S=function(e){var t=e.activeTodo,n=e.setOpenModal,r=e.openModal,o=Object(c.useState)(t.description),a=Object(b.a)(o,2),i=a[0],u=a[1],h=function(){var e=Object(j.a)(l.a.mark((function e(c){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,r={description:i},e.next=5,fetch("".concat(O,"/").concat(t.todo_id),{method:"PUT",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}});case 5:n(!1),window.location="/",e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(w.a,{closeModal:!0,show:r,onHide:function(){return n(!1)},children:[Object(p.jsx)(w.a.Header,{children:Object(p.jsx)(w.a.Title,{children:"Edit Todo"})}),Object(p.jsxs)(s.a,{onSubmit:function(e){return h(e)},children:[Object(p.jsx)(w.a.Body,{children:Object(p.jsx)(s.a.Control,{value:i,type:"text",placeholder:"Enter a new todo",onChange:function(e){return u(e.target.value)}})}),Object(p.jsxs)(w.a.Footer,{children:[Object(p.jsx)(d.a,{type:"submit",children:"Save"}),Object(p.jsx)(d.a,{variant:"secondary",onClick:function(){return n(!1)},children:"Cancel"})]})]})]})},k=function(){var e=x(),t=e.todoList,n=e.setTodoList,r=Object(c.useState)(!1),o=Object(b.a)(r,2),a=o[0],s=o[1],i=Object(c.useState)(!1),u=Object(b.a)(i,2),h=u[0],f=u[1],v=Object(c.useState)(),m=Object(b.a)(v,2),w=m[0],k=m[1],C=function(){var e=Object(j.a)(l.a.mark((function e(){var t,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O);case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,n(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){C()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{className:"text-center mt-5",children:"Todo List"}),Object(p.jsx)("div",{children:Object(p.jsx)(y.a,{children:0===t.length?Object(p.jsx)("p",{children:"No todos"}):Object(p.jsxs)(p.Fragment,{children:[t.map((function(e){return Object(p.jsxs)(y.a.Item,{className:"d-flex justify-content-between",children:[Object(p.jsx)("span",{children:e.description}),Object(p.jsxs)(g.a,{children:[Object(p.jsx)(d.a,{onClick:function(){return k(e),void f(!0)},children:"Edit"}),Object(p.jsx)(d.a,{onClick:function(){return k(e),void s(!0)},variant:"danger",children:"Delete"})]})]},e.todo_id)})),a&&Object(p.jsx)(T,{activeTodo:w,openModal:a,setOpenModal:s}),h&&Object(p.jsx)(S,{activeTodo:w,openModal:h,setOpenModal:f})]})})})]})};var C=function(){return Object(p.jsx)(f,{children:Object(p.jsxs)(m.a,{children:[Object(p.jsx)(v,{}),Object(p.jsx)(k,{})]})})};n(32);a.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(C,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.f66b5d76.chunk.js.map